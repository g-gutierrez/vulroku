{"ast":null,"code":"var _jsxFileName = \"/Users/grg/dev/repos/Vulcan/client/src/Components/Login/index.js\";\nimport React, { Component } from 'react';\nimport axios from \"axios\";\nimport LoginButton from \"../LoginButton\";\nimport LogoutButton from \"../LogoutButton\";\nimport { GoogleLogin } from 'react-google-login'; // refresh token\n\nimport { refreshTokenSetup } from '../../Utils/refreshToken';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst clientId = '827360591703-tgm50hh32gmsb3af5l2fi5kl8bd0v1j0.apps.googleusercontent.com';\nexport default class Login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onSuccess = res => {\n      console.log('Login Success: currentUser:', res.profileObj); // alert(\n      //   `Logged in successfully welcome ${res.profileObj.name}`\n      // );\n\n      refreshTokenSetup(res);\n    };\n\n    this.onFailure = res => {\n      console.log('Login failed: res:', res);\n      alert(`Failed to login.`);\n    };\n\n    this.state = {\n      email: \"\",\n      password: \"\"\n    };\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleFormSubmit = this.handleFormSubmit.bind(this);\n    this.state = {\n      isLoggedIn: false\n    };\n  }\n\n  handleInputChange(event) {\n    const formType = event.target.id;\n    this.setState({\n      [formType]: event.target.value\n    });\n  }\n\n  handleFormSubmit(event) {\n    event.preventDefault();\n    const {\n      email,\n      password\n    } = this.state;\n    const formData = {\n      \"email\": email,\n      \"password\": password\n    };\n    console.log(\"****\", formData);\n    this.setState({\n      isLoggedIn: true\n    });\n    axios.post(\"/api/login\", formData).then(res => {\n      console.log(\"*****LOGGED IN!******\", res.data);\n\n      if (res.data.success) {\n        this.setState({\n          success: true // isLoggedIn: true,\n\n        }); // return this.state.isLoggedIn;\n      }\n\n      console.log(this.state.isLoggedIn);\n    });\n  }\n\n  renderSuccessMessage() {\n    let result = null;\n\n    if (this.state.success) {\n      result = /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"success-message\",\n        children: \"You've officially signed up!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this);\n    }\n\n    return result;\n  }\n\n  disableForm() {\n    let result = false;\n\n    if (this.state.success) {\n      result = true;\n    }\n\n    return result;\n  }\n\n  render() {\n    console.log(this.state.isLoggedIn);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-sm\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: this.handleFormSubmit,\n        children: /*#__PURE__*/_jsxDEV(\"fieldset\", {\n          className: \"form-fields container\",\n          disabled: this.disableForm(),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              className: \"form-control\",\n              placeholder: \"Enter email\",\n              id: \"email\",\n              name: \"email\",\n              placeholder: \"Email\",\n              onChange: this.handleInputChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              className: \"form-control\",\n              placeholder: \"Enter email\",\n              id: \"password\",\n              name: \"password\",\n              placeholder: \"Password\",\n              onChange: this.handleInputChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"btn btn-primary btn-block\",\n            value: \"Submit\",\n            children: \"Sign In\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 15\n          }, this), this.renderSuccessMessage(), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"forgot-password text-right\",\n            children: [/*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"/sign-up\",\n              children: \"New? Create an account\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"/sign-up\",\n              children: \"Forgot password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"OR\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(GoogleLogin, {\n              clientId: clientId,\n              buttonText: \"Login with Google\" // onSuccess={onSuccess}\n              // onFailure={onFailure}\n              ,\n              cookiePolicy: 'single_host_origin',\n              style: {\n                marginTop: '100px'\n              },\n              isSignedIn: true,\n              uxMode: \"redirect\",\n              redirectURI: \"http://localhost:3000/\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/grg/dev/repos/Vulcan/client/src/Components/Login/index.js"],"names":["React","Component","axios","LoginButton","LogoutButton","GoogleLogin","refreshTokenSetup","clientId","Login","constructor","props","onSuccess","res","console","log","profileObj","onFailure","alert","state","email","password","handleInputChange","bind","handleFormSubmit","isLoggedIn","event","formType","target","id","setState","value","preventDefault","formData","post","then","data","success","renderSuccessMessage","result","disableForm","render","marginTop"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport axios from \"axios\"\nimport LoginButton from \"../LoginButton\"\nimport LogoutButton from \"../LogoutButton\"\n\nimport { GoogleLogin } from 'react-google-login';\n// refresh token\nimport { refreshTokenSetup } from '../../Utils/refreshToken';\n\nconst clientId =\n  '827360591703-tgm50hh32gmsb3af5l2fi5kl8bd0v1j0.apps.googleusercontent.com';\n\nexport default class Login extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      email: \"\",\n      password: \"\",\n    };\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleFormSubmit = this.handleFormSubmit.bind(this);\n    this.state = {isLoggedIn: false}\n  }\n\n  handleInputChange(event) {\n    const formType = event.target.id;\n    this.setState({\n      [formType]: event.target.value,\n    });\n  }\n\n  handleFormSubmit(event) {\n    event.preventDefault();\n    const {\n      email,\n      password,\n\n    } = this.state;\n    const formData = {\n      \"email\": email,\n      \"password\": password,\n    };\n\n    console.log(\"****\",formData);\n\n    this.setState({isLoggedIn: true})\n\n    axios.post(\"/api/login\", formData).then((res) => {\n      console.log(\"*****LOGGED IN!******\",res.data);\n      if (res.data.success) {\n        this.setState({\n          success: true,\n          // isLoggedIn: true,\n        });\n        // return this.state.isLoggedIn;\n      }\n    console.log(this.state.isLoggedIn)    });\n  }\n  \n  renderSuccessMessage() {\n    let result = null;\n    if (this.state.success) {\n      result = (\n        <div className=\"success-message\">\n          You've officially signed up!\n        </div>\n      );\n    }\n\n    return result;\n  }\n\n  disableForm() {\n    let result = false;\n    if (this.state.success) {\n      result = true;\n    }\n    return result;\n  }\n\n\n  onSuccess = (res) => {\n    console.log('Login Success: currentUser:', res.profileObj);\n    // alert(\n    //   `Logged in successfully welcome ${res.profileObj.name}`\n    // );\n\n    refreshTokenSetup(res);\n\n  };\n\n  onFailure = (res) => {\n    console.log('Login failed: res:', res);\n    alert(\n      `Failed to login.`\n    );\n  };\n \n    render() {\n      console.log(this.state.isLoggedIn);\n      return (\n      <div className=\"container-sm\">\n      <form onSubmit={this.handleFormSubmit}>\n          <fieldset\n            className=\"form-fields container\"\n            disabled={this.disableForm()}>\n            <div className=\"form-group\">\n              <label>Email</label>\n                <input \n                type=\"email\" \n                className=\"form-control\" \n                placeholder=\"Enter email\"\n                id=\"email\"\n                name=\"email\"\n                placeholder=\"Email\"\n                onChange={this.handleInputChange} />\n            </div>\n            <div className=\"form-group\">\n              <label>Password</label>\n                <input \n                type=\"password\" \n                className=\"form-control\" \n                placeholder=\"Enter email\"\n                id=\"password\"\n                name=\"password\"\n                placeholder=\"Password\"\n                onChange={this.handleInputChange} />\n            </div>\n              <button type=\"submit\" className=\"btn btn-primary btn-block\" value=\"Submit\">Sign In</button>\n              {this.renderSuccessMessage()}\n              <p className=\"forgot-password text-right\">\n              <a href=\"/sign-up\">New? Create an account</a>\n              <br></br>\n              <a href=\"/sign-up\">Forgot password</a>\n              </p>\n      <p>OR</p>\n      <div>\n        <GoogleLogin\n          clientId={clientId}\n          buttonText=\"Login with Google\"\n          // onSuccess={onSuccess}\n          // onFailure={onFailure}\n          cookiePolicy={'single_host_origin'}\n          style={{ marginTop: '100px' }}\n          isSignedIn={true}\n          uxMode=\"redirect\"\n          redirectURI=\"http://localhost:3000/\"\n        />\n      </div>\n      </fieldset>\n      </form>\n      </div>\n    );\n  } \n}\n"]},"metadata":{},"sourceType":"module"}