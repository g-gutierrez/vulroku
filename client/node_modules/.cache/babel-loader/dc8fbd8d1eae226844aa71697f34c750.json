{"ast":null,"code":"var _jsxFileName = \"/Users/grg/dev/repos/vulroku/client/src/Components/Login/index.js\";\nimport React, { Component } from 'react';\nimport axios from \"axios\";\nimport LoginButton from \"../LoginButton\";\nimport LogoutButton from \"../LogoutButton\"; // import { Redirect } from \"react-router-dom\"\n// import AuthContext from \"../../Utils/AuthContext\"\n\nimport { GoogleLogin } from 'react-google-login'; // refresh token\n\nimport { refreshTokenSetup } from '../../Utils/refreshToken';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst clientId = '827360591703-tgm50hh32gmsb3af5l2fi5kl8bd0v1j0.apps.googleusercontent.com';\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onSuccess = res => {\n      console.log('Login Success: currentUser:', res.profileObj); // alert(\n      //   `Logged in successfully welcome ${res.profileObj.name}`\n      // );\n\n      this.props.setAuth(true);\n      refreshTokenSetup(res);\n    };\n\n    this.onFailure = res => {\n      console.log('Login failed: res:', res);\n      alert(`Failed to login.`);\n    };\n\n    this.state = {\n      email: \"\",\n      password: \"\"\n    };\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleFormSubmit = this.handleFormSubmit.bind(this); //this.state = {isLoggedIn: false}\n  }\n\n  handleInputChange(event) {\n    const formType = event.target.id;\n    this.setState({\n      [formType]: event.target.value\n    });\n  }\n\n  handleFormSubmit(event) {\n    event.preventDefault();\n    const {\n      email,\n      password\n    } = this.state;\n    const formData = {\n      \"email\": email,\n      \"password\": password\n    };\n    console.log(\"****\", this.props); // this.setState({isLoggedIn: true})\n    // let isLoggedIn = this.context.isLoggedIn\n\n    axios.post(\"/api/login\", formData).then(res => {\n      console.log(\"*****LOGGED IN!******\", res);\n\n      if (res.data) {\n        // this.setState({\n        //   success: true,\n        //   // isLoggedIn: true,\n        // });\n        this.props.setAuth(true);\n      }\n    });\n  }\n\n  renderSuccessMessage() {\n    let result = null;\n\n    if (this.state.success) {\n      this.context.update({\n        isLoggedIn: true\n      });\n    }\n\n    return result;\n  }\n\n  disableForm() {\n    let result = false;\n\n    if (this.state.success) {\n      result = true;\n    }\n\n    return result;\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-sm\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: this.handleFormSubmit,\n        children: /*#__PURE__*/_jsxDEV(\"fieldset\", {\n          className: \"form-fields container\",\n          disabled: this.disableForm(),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              className: \"form-control\",\n              placeholder: \"Enter email\",\n              id: \"email\",\n              name: \"email\",\n              placeholder: \"Email\",\n              onChange: this.handleInputChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              className: \"form-control\",\n              placeholder: \"Enter email\",\n              id: \"password\",\n              name: \"password\",\n              placeholder: \"Password\",\n              onChange: this.handleInputChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"btn btn-primary btn-block\",\n            value: \"Submit\",\n            children: \"Sign In\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 15\n          }, this), this.renderSuccessMessage(), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"forgot-password text-right\",\n            children: [/*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"/sign-up\",\n              children: \"New? Create an account\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"/sign-up\",\n              children: \"Forgot password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"OR\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(GoogleLogin, {\n              clientId: clientId,\n              buttonText: \"Login with Google\",\n              onSuccess: this.onSuccess,\n              onFailure: this.onFailure,\n              cookiePolicy: 'single_host_origin',\n              style: {\n                marginTop: '100px'\n              },\n              isSignedIn: true // uxMode=\"redirect\"\n              // redirectURI=\"http://localhost:3000\"\n\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this);\n  }\n\n} //Login.contextType = AuthContext\n\n\nexport default Login;","map":{"version":3,"sources":["/Users/grg/dev/repos/vulroku/client/src/Components/Login/index.js"],"names":["React","Component","axios","LoginButton","LogoutButton","GoogleLogin","refreshTokenSetup","clientId","Login","constructor","props","onSuccess","res","console","log","profileObj","setAuth","onFailure","alert","state","email","password","handleInputChange","bind","handleFormSubmit","event","formType","target","id","setState","value","preventDefault","formData","post","then","data","renderSuccessMessage","result","success","context","update","isLoggedIn","disableForm","render","marginTop"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport axios from \"axios\"\nimport LoginButton from \"../LoginButton\"\nimport LogoutButton from \"../LogoutButton\"\n// import { Redirect } from \"react-router-dom\"\n// import AuthContext from \"../../Utils/AuthContext\"\n\nimport { GoogleLogin } from 'react-google-login';\n// refresh token\nimport { refreshTokenSetup } from '../../Utils/refreshToken';\n\nconst clientId =\n  '827360591703-tgm50hh32gmsb3af5l2fi5kl8bd0v1j0.apps.googleusercontent.com';\n\nclass Login extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: \"\",\n      password: \"\",\n    };\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleFormSubmit = this.handleFormSubmit.bind(this);\n    //this.state = {isLoggedIn: false}\n  }\n\n  handleInputChange(event) {\n    const formType = event.target.id;\n    this.setState({\n      [formType]: event.target.value,\n    });\n  }\n\n  handleFormSubmit(event) {\n    event.preventDefault();\n    const {\n      email,\n      password,\n\n    } = this.state;\n    const formData = {\n      \"email\": email,\n      \"password\": password,\n    };\n\n    console.log(\"****\",this.props);\n    // this.setState({isLoggedIn: true})\n\n    // let isLoggedIn = this.context.isLoggedIn\n\n    axios.post(\"/api/login\", formData).then((res) => {\n      console.log(\"*****LOGGED IN!******\",res);\n      if (res.data) {\n        // this.setState({\n        //   success: true,\n        //   // isLoggedIn: true,\n        // });\n        this.props.setAuth(true);\n      } \n    });\n  }\n  \n  renderSuccessMessage() {\n    let result = null;\n    if (this.state.success) {\n      this.context.update({ isLoggedIn: true})\n    }\n\n    return result;\n  }\n\n  disableForm() {\n    let result = false;\n    if (this.state.success) {\n      result = true;\n    }\n    return result;\n  }\n\n\n  onSuccess = (res) => {\n    console.log('Login Success: currentUser:', res.profileObj);\n    // alert(\n    //   `Logged in successfully welcome ${res.profileObj.name}`\n    // );\n    this.props.setAuth(true);\n    refreshTokenSetup(res);\n\n  };\n\n  onFailure = (res) => {\n    console.log('Login failed: res:', res);\n    alert(\n      `Failed to login.`\n    );\n  };\n \n    render() {\n      return (\n      <div className=\"container-sm\">\n      <form onSubmit={this.handleFormSubmit}>\n          <fieldset\n            className=\"form-fields container\"\n            disabled={this.disableForm()}>\n            <div className=\"form-group\">\n              <label>Email</label>\n                <input \n                type=\"email\" \n                className=\"form-control\" \n                placeholder=\"Enter email\"\n                id=\"email\"\n                name=\"email\"\n                placeholder=\"Email\"\n                onChange={this.handleInputChange} />\n            </div>\n            <div className=\"form-group\">\n              <label>Password</label>\n                <input \n                type=\"password\" \n                className=\"form-control\" \n                placeholder=\"Enter email\"\n                id=\"password\"\n                name=\"password\"\n                placeholder=\"Password\"\n                onChange={this.handleInputChange} />\n            </div>\n              <button type=\"submit\" className=\"btn btn-primary btn-block\" value=\"Submit\">Sign In</button>\n              {this.renderSuccessMessage()}\n              <p className=\"forgot-password text-right\">\n              <a href=\"/sign-up\">New? Create an account</a>\n              <br></br>\n              <a href=\"/sign-up\">Forgot password</a>\n              </p>\n      <p>OR</p>\n      <div>\n        <GoogleLogin\n          clientId={clientId}\n          buttonText=\"Login with Google\"\n          onSuccess={this.onSuccess}\n          onFailure={this.onFailure}\n          cookiePolicy={'single_host_origin'}\n          style={{ marginTop: '100px' }}\n          isSignedIn={true}\n          \n          // uxMode=\"redirect\"\n          // redirectURI=\"http://localhost:3000\"\n        />\n      </div>\n      </fieldset>\n      </form>\n      </div>\n    );\n  } \n}\n\n//Login.contextType = AuthContext\n\nexport default Login"]},"metadata":{},"sourceType":"module"}